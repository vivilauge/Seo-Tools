# ç½‘ç«™çŠ¶æ€ç æ‰¹é‡æ£€æŸ¥å·¥å…·

ä¸€ä¸ªåŸºäº Node.js çš„ç½‘ç«™çŠ¶æ€ç æ‰¹é‡æ£€æŸ¥å·¥å…·ï¼Œæ”¯æŒå®æ—¶æ˜¾ç¤ºæ£€æŸ¥ç»“æœã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- âœ… æ‰¹é‡æ£€æŸ¥ç½‘ç«™çŠ¶æ€ç 
- âœ… å®æ—¶æ˜¾ç¤ºæ£€æŸ¥ç»“æœ
- âœ… è‡ªåŠ¨å¤„ç†ä¸å¸¦åè®®çš„URLï¼ˆå¦‚ï¼š`example.com/path/file.php`ï¼‰
- âœ… æ”¯æŒHTTPå’ŒHTTPSåè®®é€‰æ‹©
- âœ… çŠ¶æ€ç åˆ†ç±»æ˜¾ç¤ºï¼ˆ2xxç»¿è‰²ã€3xxè“è‰²ã€4xxé»„è‰²ã€5xxçº¢è‰²ï¼‰
- âœ… ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º
- âœ… è¿›åº¦æ¡æ˜¾ç¤º

## å®‰è£…å’Œè¿è¡Œ

### æœ¬åœ°å¼€å‘

1. ç¡®ä¿å·²å®‰è£… Node.jsï¼ˆç‰ˆæœ¬ >= 12.0.0ï¼‰

2. å¯åŠ¨æœåŠ¡å™¨ï¼š
```bash
node server.js
```

æˆ–è€…ä½¿ç”¨ npmï¼š
```bash
npm start
```

3. åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
http://localhost:3000
```

**é‡è¦æç¤ºï¼š** 
- âœ… **æ¨èæ–¹å¼**ï¼šé€šè¿‡ Node.js æœåŠ¡å™¨è®¿é—®ï¼ˆ`http://localhost:3000`ï¼‰ï¼Œè¿™æ ·å‰ç«¯å’Œ API éƒ½èƒ½æ­£å¸¸å·¥ä½œ
- âŒ **ä¸æ¨è**ï¼šç›´æ¥åŒå‡»æ‰“å¼€ `index.html` æ–‡ä»¶ï¼Œå› ä¸º API è°ƒç”¨ä¼šå¤±è´¥ï¼ˆæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼‰
- æœåŠ¡å™¨ä¼šè‡ªåŠ¨æä¾› `index.html` é¡µé¢ï¼Œè®¿é—®æ ¹è·¯å¾„ `/` å³å¯

### éƒ¨ç½²åˆ°æœåŠ¡å™¨

#### æ–¹æ³•ä¸€ï¼šç›´æ¥è¿è¡Œï¼ˆé€‚åˆæµ‹è¯•ï¼‰

1. å°†é¡¹ç›®æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨

2. åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… Node.jsï¼ˆå¦‚æœè¿˜æ²¡æœ‰å®‰è£…ï¼‰

3. å¯åŠ¨æœåŠ¡å™¨ï¼š
```bash
node server.js
```

4. è®¿é—®æœåŠ¡å™¨IPæˆ–åŸŸåï¼š
```
http://your-server-ip:3000
```

#### æ–¹æ³•äºŒï¼šä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

1. å®‰è£… PM2ï¼š
```bash
npm install -g pm2
```

2. å¯åŠ¨åº”ç”¨ï¼ˆä½¿ç”¨é…ç½®æ–‡ä»¶ï¼‰ï¼š
```bash
pm2 start ecosystem.config.js
```

æˆ–è€…ç›´æ¥å¯åŠ¨ï¼š
```bash
pm2 start server.js --name status-checker
```

3. è®¾ç½®å¼€æœºè‡ªå¯ï¼š
```bash
pm2 startup
pm2 save
```

4. æŸ¥çœ‹çŠ¶æ€ï¼š
```bash
pm2 status
```

5. æŸ¥çœ‹æ—¥å¿—ï¼š
```bash
pm2 logs status-checker
```

6. é‡å¯åº”ç”¨ï¼š
```bash
pm2 restart status-checker
```

7. åœæ­¢åº”ç”¨ï¼š
```bash
pm2 stop status-checker
```

#### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Nginx åå‘ä»£ç†ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

1. å®‰è£… Nginxï¼ˆå¦‚æœè¿˜æ²¡æœ‰å®‰è£…ï¼‰

2. é…ç½® Nginxï¼ˆç¼–è¾‘ `/etc/nginx/sites-available/default` æˆ–åˆ›å»ºæ–°é…ç½®æ–‡ä»¶ï¼‰ï¼š
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

3. é‡å¯ Nginxï¼š
```bash
sudo nginx -t
sudo systemctl restart nginx
```

4. ä½¿ç”¨ PM2 å¯åŠ¨ Node.js åº”ç”¨ï¼ˆè§æ–¹æ³•äºŒï¼‰

5. è®¿é—®ï¼š
```
http://your-domain.com
```

#### æ–¹æ³•å››ï¼šä½¿ç”¨ Dockerï¼ˆå¯é€‰ï¼‰

1. åˆ›å»º `Dockerfile`ï¼š
```dockerfile
FROM node:16-alpine
WORKDIR /app
COPY package.json .
RUN npm install
COPY . .
EXPOSE 3000
CMD ["node", "server.js"]
```

2. æ„å»ºé•œåƒï¼š
```bash
docker build -t status-checker .
```

3. è¿è¡Œå®¹å™¨ï¼š
```bash
docker run -d -p 3000:3000 --name status-checker status-checker
```

#### æ–¹æ³•äº”ï¼šéƒ¨ç½²åˆ°äº‘å¹³å°ï¼ˆæ¨èï¼Œé€‚åˆ GitHub é¡¹ç›®ï¼‰

é¡¹ç›®å·²é…ç½®å¥½å¤šç§äº‘å¹³å°çš„éƒ¨ç½²æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥éƒ¨ç½²ï¼š

##### ğŸš€ Vercel éƒ¨ç½²ï¼ˆæ¨èï¼Œå…è´¹ä¸”å¿«é€Ÿï¼‰

1. è®¿é—® [Vercel](https://vercel.com)
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
3. ç‚¹å‡» "New Project"
4. å¯¼å…¥ä½ çš„ GitHub ä»“åº“ `vivilauge/Websit-Status-Check`
5. Vercel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° `vercel.json` é…ç½®æ–‡ä»¶
6. ç‚¹å‡» "Deploy" å³å¯è‡ªåŠ¨éƒ¨ç½²
7. éƒ¨ç½²å®Œæˆåä¼šè·å¾—ä¸€ä¸ªå…è´¹çš„åŸŸåï¼ˆå¦‚ï¼š`your-project.vercel.app`ï¼‰

**ä¼˜ç‚¹ï¼š**
- âœ… å®Œå…¨å…è´¹
- âœ… è‡ªåŠ¨ HTTPS
- âœ… å…¨çƒ CDN åŠ é€Ÿ
- âœ… è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¯æ¬¡ push åˆ° GitHub è‡ªåŠ¨æ›´æ–°ï¼‰

##### ğŸš‚ Railway éƒ¨ç½²

1. è®¿é—® [Railway](https://railway.app)
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
3. ç‚¹å‡» "New Project" â†’ "Deploy from GitHub repo"
4. é€‰æ‹©ä½ çš„ä»“åº“
5. Railway ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° `railway.json` é…ç½®æ–‡ä»¶
6. ç‚¹å‡» "Deploy" å¼€å§‹éƒ¨ç½²

**ä¼˜ç‚¹ï¼š**
- âœ… å…è´¹é¢åº¦å……è¶³
- âœ… è‡ªåŠ¨ HTTPS
- âœ… ç®€å•æ˜“ç”¨

##### ğŸ¨ Render éƒ¨ç½²

1. è®¿é—® [Render](https://render.com)
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
3. ç‚¹å‡» "New" â†’ "Web Service"
4. è¿æ¥ä½ çš„ GitHub ä»“åº“
5. Render ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° `render.yaml` é…ç½®æ–‡ä»¶
6. ç‚¹å‡» "Create Web Service" å¼€å§‹éƒ¨ç½²

**ä¼˜ç‚¹ï¼š**
- âœ… å…è´¹å¥—é¤å¯ç”¨
- âœ… è‡ªåŠ¨ HTTPS
- âœ… æ”¯æŒè‡ªåŠ¨éƒ¨ç½²

##### ğŸ“¦ GitHub Actionsï¼ˆCI/CDï¼‰

é¡¹ç›®å·²é…ç½® GitHub Actionsï¼Œæ¯æ¬¡ push ä»£ç åˆ° GitHub æ—¶ä¼šè‡ªåŠ¨ï¼š
- âœ… è¿è¡Œä»£ç æµ‹è¯•
- âœ… æ£€æŸ¥ä»£ç è¯­æ³•
- âœ… éªŒè¯æœåŠ¡å™¨å¯åŠ¨

æŸ¥çœ‹ Actions çŠ¶æ€ï¼šè®¿é—®ä½ çš„ GitHub ä»“åº“ â†’ "Actions" æ ‡ç­¾é¡µ

**æ³¨æ„ï¼š** GitHub Actions ä»…ç”¨äºæµ‹è¯•å’Œ CI/CDï¼Œä¸èƒ½ç”¨äºé•¿æœŸè¿è¡ŒæœåŠ¡ã€‚å¦‚éœ€è¿è¡ŒæœåŠ¡ï¼Œè¯·ä½¿ç”¨ä¸Šè¿°äº‘å¹³å°ã€‚

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ç«¯å£ï¼š

```bash
PORT=8080 node server.js
```

## ä½¿ç”¨è¯´æ˜

1. æ‰“å¼€ç½‘é¡µåï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤åè®®ï¼ˆHTTP æˆ– HTTPSï¼‰

2. è¾“å…¥URLåˆ—è¡¨ï¼Œæ¯è¡Œä¸€ä¸ªï¼Œæ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š
   - å®Œæ•´URLï¼š`https://example.com/path/file.php`
   - ä¸å¸¦åè®®ï¼š`example.com/path/file.php`
   - è·¯å¾„ï¼ˆéœ€é…åˆåŸºç¡€åŸŸåï¼‰ï¼š`/path/file.php`

3. ç‚¹å‡»"å¼€å§‹æ£€æŸ¥"æŒ‰é’®ï¼Œç³»ç»Ÿä¼šé€ä¸ªæ£€æŸ¥URLå¹¶å®æ—¶æ˜¾ç¤ºç»“æœ

4. å¯ä»¥éšæ—¶ç‚¹å‡»"åœæ­¢æ£€æŸ¥"æŒ‰é’®åœæ­¢æ£€æŸ¥

5. ç‚¹å‡»"æ¸…ç©ºç»“æœ"æŒ‰é’®æ¸…ç©ºæ‰€æœ‰ç»“æœ

## æ³¨æ„äº‹é¡¹

- é»˜è®¤ç«¯å£æ˜¯ 3000ï¼Œå¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ `PORT` ä¿®æ”¹
- æœåŠ¡å™¨ä¼šåŒæ—¶æä¾›é™æ€æ–‡ä»¶æœåŠ¡å’ŒAPIæœåŠ¡
- å¦‚æœéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®ä½¿ç”¨ PM2 æˆ– Docker ç®¡ç†è¿›ç¨‹
- å¦‚æœéœ€è¦HTTPSï¼Œå»ºè®®ä½¿ç”¨ Nginx åå‘ä»£ç†å¹¶é…ç½®SSLè¯ä¹¦

## æ•…éšœæ’é™¤

### ç«¯å£è¢«å ç”¨

å¦‚æœé‡åˆ°ç«¯å£è¢«å ç”¨çš„é”™è¯¯ï¼Œå¯ä»¥ï¼š
1. ä¿®æ”¹ `server.js` ä¸­çš„ `PORT` å˜é‡
2. æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š`PORT=8080 node server.js`

### æ— æ³•è®¿é—®

1. æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾äº†ç›¸åº”ç«¯å£
2. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œï¼š`ps aux | grep node`
3. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ç¡®è®¤æ˜¯å¦æœ‰é”™è¯¯

### CORS é”™è¯¯

å¦‚æœé‡åˆ°è·¨åŸŸé—®é¢˜ï¼Œæ£€æŸ¥ `server.js` ä¸­çš„ CORS è®¾ç½®æ˜¯å¦æ­£ç¡®ã€‚

## è®¸å¯è¯

MIT

